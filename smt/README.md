# SMT

## smt-runner tool

* Update SMT to slot 5 and return the summaries of each slot (from slot 2 to slot 5)

> slot 0 and slot 1 are initialization of chain, there're no users transactions, so we never challenge them.

Command:
```
smt-runner --config ./solana-accountsdb-plugin-postgres/scripts/geyser.json --ledger rock-smt update -s 5
```

Result:
```
Updated SMT, the summary are: "[{\"slot\":5,\"record\":{\"first_hash\":\"Hxuk6ojKAswPPjsMitTwC7APYxbVJSTe4NDjveKirtXQ\",\"second_hash\":\"73ZfvE5X9RQQBDBVDKN6wK2yoZK7EXdnx9XDoB9qPVn6\",\"thrid_hash\":\"7WDo4ki1YUN7DifVSDBTmdQYfSC5TKKLcR7yqxr9SkF2\",\"fourth_hash\":\"7sJ3qrPWn9emZE5mS7k123K8TEw9W8xtKgYwL82HzBNp\"},\"count\":1},{\"slot\":3,\"record\":{\"first_hash\":\"5x9ArZ5gwBshBaXwmyQ2ix8Fqi2LwdCETHLAePGjdyni\",\"second_hash\":\"6h8aLna8H2qqGZcED4pHwCTS7fowAGQrpZer6McXwsjL\",\"thrid_hash\":\"6vazq453bLvmbuwV3wsqviLwLNEx7WhE9CY6w8tUBZhF\",\"fourth_hash\":\"2iruYLo9cYXtE4FZQMWrAum1t7USHGjoUM1k16L9jQAD\"},\"count\":1},{\"slot\":4,\"record\":{\"first_hash\":\"2iruYLo9cYXtE4FZQMWrAum1t7USHGjoUM1k16L9jQAD\",\"second_hash\":\"31CVfaicX5ajrxHiqPAAaYtfTpYZN1Sy9H2wSxNV8y8W\",\"thrid_hash\":\"GVz34rKRUtnkKASBJTREMnSsrbUoJKdUWbbh8V2y5oY1\",\"fourth_hash\":\"Hxuk6ojKAswPPjsMitTwC7APYxbVJSTe4NDjveKirtXQ\"},\"count\":1},{\"slot\":2,\"record\":{\"first_hash\":\"\",\"second_hash\":\"75Hw3LFDkrgHfpZuQVzCWJnGr2JLfwZ1A1k7My3MP4AP\",\"thrid_hash\":\"BdxKrfrCYt7ZDcrKYj8a26BYfqwNAmx1KPNGJEYCtQYV\",\"fourth_hash\":\"5x9ArZ5gwBshBaXwmyQ2ix8Fqi2LwdCETHLAePGjdyni\"},\"count\":1}]"
```

For record in summary, be aware that:
```
root_i = second_hash_i+1
ha_i = third_hash_i
```

* Query transaction context from slot and index

Command:
```
smt-runner --config ./solana-accountsdb-plugin-postgres/scripts/geyser.json --ledger rock-smt query -s 6 -t 0
```

Result:
```
Context for 0-th tx at slot 6 are: {"pre_accounts":{"HTsiDLVh2DRLJYSCMqdwkmJqn3xwQRxgiheM3YBcD5rU":["GpRfBRtNbSvriyRAeN8VsXi4oV4Z9VUpvTZf2zo18PAS",{"lamports":499999980000,"data":"","owner":"11111111111111111111111111111111","executable":false,"rent_epoch":0}],"CM21DCsDdKpevv69FSyup9P1Van9PqUsxWFaws7LkDGw":["DH3uYwqDhX6ywHCt9mUXWnXz3Q67SYJvvJhKavKz8LW7",{"lamports":1000000000000000,"data":"01000000f49d6e33971d34d32d604e7ba96fd1c027b08e7c0d0bfdaf20a4990d78553fd5a8914ea329c13b3fdd234c804d01667faaa7162e8612e69cf04bbd903512c87400040000000000000001000000000000000400000002000000000000000300000003000000000000000200000004000000000000000100000001000000000000000001000000000000000000000000000000a8914ea329c13b3fdd234c804d01667faaa7162e8612e69cf04bbd903512c8740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f0000000000000001010000000000000000000000000000000100000000000000000000000000000004000000000000000ced486400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","owner":"Vote111111111111111111111111111111111111111","executable":false,"rent_epoch":0}],"Vote111111111111111111111111111111111111111":["8tRhF53FtnrEX1r4THZFfPCQgeGS2NdizTnDuYZBUxEe",{"lamports":1,"data":"766f74655f70726f6772616d","owner":"NativeLoader1111111111111111111111111111111","executable":true,"rent_epoch":0}]},"post_accounts":{"CM21DCsDdKpevv69FSyup9P1Van9PqUsxWFaws7LkDGw":["Evu7aGiFN7XT5wRqJheAude3WeKU2E6gMktSFo8p4Pve",{"lamports":1000000000000000,"data":"01000000f49d6e33971d34d32d604e7ba96fd1c027b08e7c0d0bfdaf20a4990d78553fd5a8914ea329c13b3fdd234c804d01667faaa7162e8612e69cf04bbd903512c87400050000000000000001000000000000000500000002000000000000000400000003000000000000000300000004000000000000000200000005000000000000000100000001000000000000000001000000000000000000000000000000a8914ea329c13b3fdd234c804d01667faaa7162e8612e69cf04bbd903512c8740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f0000000000000001010000000000000000000000000000000100000000000000000000000000000005000000000000000ced486400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","owner":"Vote111111111111111111111111111111111111111","executable":false,"rent_epoch":0}],"HTsiDLVh2DRLJYSCMqdwkmJqn3xwQRxgiheM3YBcD5rU":["KvLY8Q13cJSMhFSmpHVfe1jTE7aHVSo7Y4JA42LHBay",{"lamports":499999970000,"data":"","owner":"11111111111111111111111111111111","executable":false,"rent_epoch":0}]},"tx":{"signatures":[[2],[235,6,118,89,97,73,43,222,19,58,193,90,247,47,7,238,157,195,241,42,215,79,164,102,123,56,17,104,167,85,95,142,113,10,14,158,85,57,17,167,32,190,83,161,170,173,162,26,67,187,23,152,132,203,126,149,168,240,33,13,219,219,204,13],[68,242,168,89,238,35,98,200,153,198,41,89,89,171,76,97,124,37,144,4,8,146,236,195,44,223,147,43,69,26,15,96,177,111,239,18,58,165,184,57,45,25,53,100,99,142,253,7,147,12,188,94,209,138,46,153,69,150,121,75,73,111,242,14]],"message":{"header":{"numRequiredSignatures":2,"numReadonlySignedAccounts":0,"numReadonlyUnsignedAccounts":1},"accountKeys":[[3],[244,157,110,51,151,29,52,211,45,96,78,123,169,111,209,192,39,176,142,124,13,11,253,175,32,164,153,13,120,85,63,213],[168,145,78,163,41,193,59,63,221,35,76,128,77,1,102,127,170,167,22,46,134,18,230,156,240,75,189,144,53,18,200,116],[7,97,72,29,53,116,116,187,124,77,118,36,235,211,189,179,216,53,94,115,209,16,67,252,13,163,83,128,0,0,0,0]],"recentBlockhash":[211,140,43,113,90,234,63,70,40,248,182,62,185,153,68,119,63,202,19,123,203,83,121,224,55,12,209,189,147,98,125,240],"instructions":[[1],{"programIdIndex":2,"accounts":[[2],1,1],"data":[[72],64,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,5,1,5,1,4,1,3,1,2,1,1,27,234,176,217,47,176,115,252,217,205,54,177,128,71,168,51,134,189,123,107,182,92,1,213,58,98,234,30,62,96,138,146,1,12,237,72,100,0,0,0,0]}]}},"pre_root":"7sJ3qrPWn9emZE5mS7k123K8TEw9W8xtKgYwL82HzBNp","update_commitment":"AN6zMNEGmLKsKsmQKJVuD5crhKLcAfcc6HaCrNjiZgPM","pre_account_proof":"4c4ff551f5f9c4edfd77fda86510f1e39acac09f79f53d2ee348eca6a2634051d7069c62787092156084ee213f4c267a943c67a999c07372229d8be9659ee370311ef713004f0251f8d04f482062b3503d5a586d648c008fbbc5f4ce08b4364a6a49659d740974fa101abfd7f4f6ce7f3e3f241336a663ad4d663328d8bdca1a9649056f597f38500051f97023fb63e4c21562cebd298dbec229c66ade4cbf928d6e14cd9f5d13ca4d0af968cb8880ecfe25cc162eaf02151b50e66df714e5c1d8bef280e0216dd5fe7900510125fdafbce655b767bd2df387017b56223336fc8434d2548490ad03ac1d28740d000000000000000000000000000000000000000000000000000000000000000051fb0256cc2f2e65bfbfa65ce95b6a8725228c0e2eee855e5677f353ec39d238191a18b24ed7ba6fd2c9ef7d0cf883735c51f0aca18104b1b5be82be00b49331ad02500a4dc937d0f8534719aacac0dfb48a204faa21d16ff305307d53e04d7822396750809390c6daad3b2337093830264452733e1deaa000a328ef6b04ada4193f85464c4ff951f9bba06fca0a0de537e9dd009e3ccbba095ef49f2a81aed0ee1a6fb09a0b56dc7e86c414aef0981fa46a01c1dac8c9248fe6d3fb3bc9b58766b860a9e1c65dd70150810d61952b827552b8c59e68d659280619dd306344d13ca36794d19d5d94e87d508881a25f3537bad5e67f916d37ed0dcca6bcd747bcbb80249c6c1f4999766b3e5050dc3931182fb2e75a65828db6154df83e106cc387d30b5f551f6b8782fc31cb50f60366ec3ba6e36fadfe246f7ef4e7738ffa6140b19a8f480188def26c45de13484c4ff65103d23dca1c0913f510ebf10de77a4cc97fae247870a30776bfa75acf236b2bf78900000000000000000000000000000000000000000000000000000000000028004f0150fd33402d2f37a8db216f286c8bc2fc84ce93d98e313b3d662302a6a7f9f9b40350d761fbb8cb7361372ba3a0953b6c88633c9266f6c4f3c4f2b57663e73140472a500cf01f07b80298e5eca3c23c2f61344ccc1256b9795ebb8f20955895350fdd205064f34ef7f66511be3e336b991e68d7cb6657ba35d83698a2f7733e0fa28868c150351125e42a7911db9b5b5155eb6dcaa3f0768c9a046b67b459012caa49d169eb50c7d5c1fbe80462f3be8b0de8ed9fe31811411cc0897ff17ac694b880746a44c65074719405db7b4ec06f3ebab8b545050588fd2f78837c83b05d1495e3e4b72cb448","block_height":6}
```